{"version":3,"sources":["components/MessageForm/MessageForm.module.css","components/Header/Header.module.css","components/MessageFeed/MessageFeed.module.css","components/LoginSignup/LoginSignup.module.css","App.module.css","components/ChatBox/ChatBox.module.css","components/Header/Header.js","soketti.js","components/MessageForm/MessageForm.js","api/message.js","components/MessageFeed/MessageFeed.js","components/ChatBox/Chatbox.js","components/LoginSignup/LoginSignup.js","api/auth.js","components/utils/authentication.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","Header","className","css","title","socket","io","on","console","log","MessageForm","useState","message","setMessage","validate","e","preventDefault","data","userName","JSON","parse","localStorage","getItem","msgData","axios","post","emit","target","reset","onSubmit","pattern","maxLength","required","inputChat","placeholder","onChange","value","sendButton","type","MessageFeed","box","ChatBox","React","list","setList","useEffect","messages","je","map","msgTime","time","Date","messageTime","toLocaleString","split","today","now","controller","superController","item","liMessage","name","flexController","teksti","removeButton","onClick","id","newList","filter","handleRemove","toppaneleft","inputsUsernameSignUp","toppaneright","usersText","aside","usersList","feed","Input","setValue","LoginSignup","action","setName","password","setPassword","style","background","trim","validateForm","form","color","URL","validateLogin","a","userData","alert","response","validateSignup","App","isAuthenticated","setIsAuthenticated","obg","token","setItem","stringify","user","backgroundColor","marginLeft","confirm","clear","section","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7d7567b4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputChat\":\"MessageForm_inputChat__aQLW1\",\"sendButton\":\"MessageForm_sendButton__1xv1A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Header_title__3SH2Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"MessageFeed_box__12tUp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"LoginSignup_form__2HOIW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"App_section__1OL6S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controller\":\"ChatBox_controller__2YqpX\",\"superController\":\"ChatBox_superController__3OAP4\",\"flexController\":\"ChatBox_flexController__N3g51\",\"aside\":\"ChatBox_aside__1e6dg\",\"feed\":\"ChatBox_feed__1yOeR\",\"toppaneleft\":\"ChatBox_toppaneleft___mu8Y\",\"toppaneright\":\"ChatBox_toppaneright__fMlVa\",\"usersText\":\"ChatBox_usersText__3Bl2o\",\"usersList\":\"ChatBox_usersList__3GDk4\",\"loginButton\":\"ChatBox_loginButton__1WTfk\",\"signUpButton\":\"ChatBox_signUpButton__2AL-A\",\"inputUsername\":\"ChatBox_inputUsername__2Mee0\",\"inputPassword\":\"ChatBox_inputPassword__186nZ\",\"inputsLoginPassword\":\"ChatBox_inputsLoginPassword__3dkVv\",\"inputsUsernameSignUp\":\"ChatBox_inputsUsernameSignUp__2n0bI\",\"chatMessages\":\"ChatBox_chatMessages__1fRtn\",\"name\":\"ChatBox_name__1KxRA\",\"teksti\":\"ChatBox_teksti__8c9Mn\",\"messagesList\":\"ChatBox_messagesList__34Q80\",\"liMessage\":\"ChatBox_liMessage__1DgYs\",\"removeButton\":\"ChatBox_removeButton__1ae0g\",\"msgTime\":\"ChatBox_msgTime__2ZaYJ\"};","import css from './Header.module.css';\nconst Header = () => {\n  return <h1 className={css.title}>SUPER CHAT</h1>;\n};\n\nexport default Header;\n","import io from 'socket.io-client';\n\n// const socket = io('http://localhost:3001');\nconst socket = io();\n\nsocket.on('connect', () => {\n  console.log('connected');\n});\n\nexport default socket;\n","import React, { useState } from 'react';\nimport { createMessage } from '../../api/message';\nimport css from './MessageForm.module.css';\nimport socket from '../../soketti';\n\nconst MessageForm = () => {\n  // message = inputin sen hetkinen arvo\n  // setMessage = asettaa inputille arvon kun kenttään kirjoitetaan\n  const [message, setMessage] = useState('');\n\n  function validate(e) {\n    // e.preventDefault estää sivun päivittymisen (default toiminto 90 luvulta kun lomakkeilla lähetettiin dataa)\n    e.preventDefault();\n\n    // Jos viestikenttä on tyhjä älä tee mitään\n    if (!message) {\n      return;\n    }\n    const { userName } = JSON.parse(localStorage.getItem('user'));\n    const msgData = { message, userName };\n    createMessage(msgData);\n    socket.emit('message', msgData);\n    e.target.reset();\n    setMessage('');\n  }\n\n  return (\n    <form onSubmit={(e) => validate(e)}>\n      <input\n        pattern=\"^.{1,80}$\"\n        title=\"Max 80 characters.\"\n        maxLength=\"80\"\n        required=\"required\"\n        className={css.inputChat}\n        placeholder=\"Type something\"\n        onChange={(e) => setMessage(e.target.value)}\n      />\n      <button className={css.sendButton} type=\"submit\">\n        SEND\n      </button>\n    </form>\n  );\n};\n\nexport default MessageForm;\n","import axios from 'axios';\n\nconst URL = '/api/message';\n\nexport const createMessage = (data) => axios.post(URL, data);\n","import css from './MessageFeed.module.css';\nimport React from 'react';\nimport MessageForm from '../MessageForm/MessageForm';\n\nconst MessageFeed = () => {\n  return (\n    <div className={css.box}>\n      <MessageForm />\n    </div>\n  );\n};\n\nexport default MessageFeed;\n","import MessageFeed from '../MessageFeed/MessageFeed';\nimport css from './ChatBox.module.css';\nimport React, { useEffect } from 'react';\nimport socket from '../../soketti';\n\nconst ChatBox = () => {\n  const [list, setList] = React.useState([]);\n\n  useEffect(() => {\n    socket.on('message', function (messages) {\n      // TODO: Tämä mappaussetti vois olla omassa tiedostossaan\n      const je = messages.map((message) => {\n        const time = new Date(message.messageTime)\n          .toLocaleString('en-GB')\n          .split(',');\n        const today = new Date(Date.now()).toLocaleString('en-GB').split(',');\n        let msgTime;\n        if (time[0] === today[0]) msgTime = `Today at ${time[1]}`;\n        return {\n          ...message,\n          messageTime: msgTime ?? `${time[0]} at ${time[1]}`,\n        };\n      });\n      console.log(je);\n      setList(je);\n    });\n  }, []);\n\n  function handleRemove(id) {\n    const newList = list.filter((item) => item.id !== id);\n    setList(newList);\n  }\n\n  return (\n    <section className={css.controller}>\n      <section className={css.superController}>\n        <ul>\n          {list.map((item) => (\n            <li className={css.liMessage} key={item.id}>\n              <p className={css.name}>\n                {item.userName}{' '}\n                <span className={css.msgTime}>{item.messageTime}</span>\n              </p>\n              <div className={css.flexController}>\n                <p className={css.teksti}>{item.message}</p>\n                <button\n                  className={css.removeButton}\n                  type=\"button\"\n                  onClick={() => handleRemove(item.id)}\n                >\n                  Remove\n                </button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      </section>\n      <div className={css.toppaneleft}>\n        <div className={css.inputsUsernameSignUp}></div>\n      </div>\n      <div className={css.toppaneright}>\n        <h1 className={css.usersText}>users</h1>\n      </div>\n\n      <aside className={css.aside}>\n        <ul className={css.usersList}>\n          <li>user_1</li>\n        </ul>\n      </aside>\n      <div className={css.feed}>\n        <MessageFeed />\n      </div>\n    </section>\n  );\n};\nexport default ChatBox;\n","import { useState } from 'react';\nimport css from './LoginSignup.module.css';\nconst Input = ({ setValue, placeholder, type, value }) => {\n  return (\n    <input\n      required\n      placeholder={placeholder}\n      type={type}\n      value={value}\n      onChange={(e) => setValue(e.target.value)}\n    />\n  );\n};\nconst LoginSignup = ({ action, type }) => {\n  const [name, setName] = useState('');\n  const [password, setPassword] = useState('');\n\n  function validateForm(e) {\n    e.preventDefault();\n    if (!(name.trim() && password.trim())) return;\n    action(name, password);\n    setPassword('');\n  }\n  return (\n    <form\n      style={\n        type === 'signup'\n          ? { background: 'linear-gradient(to top, #00bfff, #94a0ff)' }\n          : null\n      }\n      onSubmit={(e) => validateForm(e, name, password)}\n      className={css.form}\n    >\n      <Input\n        setValue={setName}\n        placeholder={'name'}\n        type={'text'}\n        value={name}\n      />\n\n      <Input\n        setValue={setPassword}\n        placeholder={'password'}\n        type={'password'}\n        value={password}\n      />\n      <button\n        style={\n          type === 'signup'\n            ? {\n                background: 'linear-gradient(to top, #00bfff, #94a0ff',\n                color: 'white',\n              }\n            : null\n        }\n        type=\"submit\"\n      >\n        {type}\n      </button>\n    </form>\n  );\n};\nexport default LoginSignup;\n","import axios from 'axios';\n\nconst URL = '/auth';\n\nexport const signup = (userData) => axios.post(`${URL}/signup`, userData);\nexport const login = (userData) => axios.post(`${URL}/login`, userData);\n","import { login, signup } from '../../api/auth';\n\nexport const validateLogin = async (name, password) => {\n  try {\n    const { data } = await login({ name, password });\n    return data;\n  } catch (error) {\n    alert(error.response.data.message);\n    return null;\n  }\n};\n\nexport const validateSignup = async (name, password) => {\n  try {\n    const { data } = await signup({ name, password });\n    return data;\n  } catch (error) {\n    alert(error.response.data.message);\n    return null;\n  }\n};\n","import Header from './components/Header/Header';\nimport ChatBox from './components/ChatBox/Chatbox';\nimport LoginSignup from './components/LoginSignup/LoginSignup';\nimport css from './App.module.css';\nimport { useEffect, useState } from 'react';\nimport {\n  validateLogin,\n  validateSignup,\n} from './components/utils/authentication';\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  // Katsoo aina sivun latautuessa löytyykö token jo localstoragesta\n  // TODO:\n  // Tokenin voimassaolon tarkistaminen\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem('user'));\n    if (user?.token) {\n      setIsAuthenticated(true);\n    }\n  }, []);\n\n  async function loginUser(name, password) {\n    const userData = await validateLogin(name, password);\n    console.log(userData);\n    if (!userData) return;\n    const obg = { userName: name, token: userData.token };\n    localStorage.setItem('user', JSON.stringify(obg));\n    setIsAuthenticated(true);\n  }\n\n  async function signupUser(name, password) {\n    const userData = await validateSignup(name, password);\n    if (!userData) return;\n    alert(`Created user ${userData.name}`);\n  }\n\n  return (\n    <main>\n      {isAuthenticated ? (\n        <>\n          <button\n            style={{\n              backgroundColor: 'whitesmoke',\n              marginLeft: '10%',\n            }}\n            onClick={() => {\n              // eslint-disable-next-line no-restricted-globals\n              const logout = confirm('Want to logout?');\n              if (logout) {\n                localStorage.clear();\n                setIsAuthenticated(false);\n              }\n            }}\n          >\n            LOGOUT\n          </button>\n          <Header />\n          <ChatBox />\n        </>\n      ) : (\n        <section className={css.section}>\n          <LoginSignup action={loginUser} type={'login'} />\n          <LoginSignup action={signupUser} type={'signup'} />\n        </section>\n      )}\n    </main>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}