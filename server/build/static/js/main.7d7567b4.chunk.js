(this["webpackJsonpsuper-chat"]=this["webpackJsonpsuper-chat"]||[]).push([[0],{28:function(e,t,n){e.exports={inputChat:"MessageForm_inputChat__aQLW1",sendButton:"MessageForm_sendButton__1xv1A"}},39:function(e,t,n){e.exports={title:"Header_title__3SH2Q"}},40:function(e,t,n){e.exports={box:"MessageFeed_box__12tUp"}},44:function(e,t,n){e.exports={form:"LoginSignup_form__2HOIW"}},45:function(e,t,n){e.exports={section:"App_section__1OL6S"}},7:function(e,t,n){e.exports={controller:"ChatBox_controller__2YqpX",superController:"ChatBox_superController__3OAP4",flexController:"ChatBox_flexController__N3g51",aside:"ChatBox_aside__1e6dg",feed:"ChatBox_feed__1yOeR",toppaneleft:"ChatBox_toppaneleft___mu8Y",toppaneright:"ChatBox_toppaneright__fMlVa",usersText:"ChatBox_usersText__3Bl2o",usersList:"ChatBox_usersList__3GDk4",loginButton:"ChatBox_loginButton__1WTfk",signUpButton:"ChatBox_signUpButton__2AL-A",inputUsername:"ChatBox_inputUsername__2Mee0",inputPassword:"ChatBox_inputPassword__186nZ",inputsLoginPassword:"ChatBox_inputsLoginPassword__3dkVv",inputsUsernameSignUp:"ChatBox_inputsUsernameSignUp__2n0bI",chatMessages:"ChatBox_chatMessages__1fRtn",name:"ChatBox_name__1KxRA",teksti:"ChatBox_teksti__8c9Mn",messagesList:"ChatBox_messagesList__34Q80",liMessage:"ChatBox_liMessage__1DgYs",removeButton:"ChatBox_removeButton__1ae0g",msgTime:"ChatBox_msgTime__2ZaYJ"}},76:function(e,t,n){"use strict";n.r(t);var a=n(5),s=n.n(a),r=n(38),c=n.n(r),o=n(16),i=n.n(o),u=n(20),l=n(17),p=n(39),j=n.n(p),m=n(0),f=function(){return Object(m.jsx)("h1",{className:j.a.title,children:"SUPER CHAT"})},h=n(29),x=n(40),d=n.n(x),b=n(21),_=n.n(b),g=n(28),O=n.n(g),v=n(46),C=Object(v.a)();C.on("connect",(function(){console.log("connected")}));var B=C,N=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1];function r(e){if(e.preventDefault(),n){var t,a=JSON.parse(localStorage.getItem("user")).userName,r={message:n,userName:a};t=r,_.a.post("/api/message",t),B.emit("message",r),e.target.reset(),s("")}}return Object(m.jsxs)("form",{onSubmit:function(e){return r(e)},children:[Object(m.jsx)("input",{pattern:"^.{1,80}$",title:"Max 80 characters.",maxLength:"80",required:"required",className:O.a.inputChat,placeholder:"Type something",onChange:function(e){return s(e.target.value)}}),Object(m.jsx)("button",{className:O.a.sendButton,type:"submit",children:"SEND"})]})},S=function(){return Object(m.jsx)("div",{className:d.a.box,children:Object(m.jsx)(N,{})})},y=n(7),k=n.n(y),w=function(){var e=s.a.useState([]),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){B.on("message",(function(e){var t=e.map((function(e){var t,n,a=new Date(e.messageTime).toLocaleString("en-GB").split(","),s=new Date(Date.now()).toLocaleString("en-GB").split(",");return a[0]===s[0]&&(n="Today at ".concat(a[1])),Object(h.a)(Object(h.a)({},e),{},{messageTime:null!==(t=n)&&void 0!==t?t:"".concat(a[0]," at ").concat(a[1])})}));console.log(t),r(t)}))}),[]),Object(m.jsxs)("section",{className:k.a.controller,children:[Object(m.jsx)("section",{className:k.a.superController,children:Object(m.jsx)("ul",{children:n.map((function(e){return Object(m.jsxs)("li",{className:k.a.liMessage,children:[Object(m.jsxs)("p",{className:k.a.name,children:[e.userName," ",Object(m.jsx)("span",{className:k.a.msgTime,children:e.messageTime})]}),Object(m.jsxs)("div",{className:k.a.flexController,children:[Object(m.jsx)("p",{className:k.a.teksti,children:e.message}),Object(m.jsx)("button",{className:k.a.removeButton,type:"button",onClick:function(){return function(e){var t=n.filter((function(t){return t.id!==e}));r(t)}(e.id)},children:"Remove"})]})]},e.id)}))})}),Object(m.jsx)("div",{className:k.a.toppaneleft,children:Object(m.jsx)("div",{className:k.a.inputsUsernameSignUp})}),Object(m.jsx)("div",{className:k.a.toppaneright,children:Object(m.jsx)("h1",{className:k.a.usersText,children:"users"})}),Object(m.jsx)("aside",{className:k.a.aside,children:Object(m.jsx)("ul",{className:k.a.usersList,children:Object(m.jsx)("li",{children:"user_1"})})}),Object(m.jsx)("div",{className:k.a.feed,children:Object(m.jsx)(S,{})})]})},L=n(44),T=n.n(L),M=function(e){var t=e.setValue,n=e.placeholder,a=e.type,s=e.value;return Object(m.jsx)("input",{required:!0,placeholder:n,type:a,value:s,onChange:function(e){return t(e.target.value)}})},U=function(e){var t=e.action,n=e.type,s=Object(a.useState)(""),r=Object(l.a)(s,2),c=r[0],o=r[1],i=Object(a.useState)(""),u=Object(l.a)(i,2),p=u[0],j=u[1];return Object(m.jsxs)("form",{style:"signup"===n?{background:"linear-gradient(to top, #00bfff, #94a0ff)"}:null,onSubmit:function(e){return function(e){e.preventDefault(),c.trim()&&p.trim()&&(t(c,p),j(""))}(e)},className:T.a.form,children:[Object(m.jsx)(M,{setValue:o,placeholder:"name",type:"text",value:c}),Object(m.jsx)(M,{setValue:j,placeholder:"password",type:"password",value:p}),Object(m.jsx)("button",{style:"signup"===n?{background:"linear-gradient(to top, #00bfff, #94a0ff",color:"white"}:null,type:"submit",children:n})]})},D=n(45),F=n.n(D),P="/auth",A=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r={name:t,password:n},_.a.post("".concat(P,"/login"),r);case 3:return a=e.sent,s=a.data,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message),e.abrupt("return",null);case 12:case"end":return e.stop()}var r}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r={name:t,password:n},_.a.post("".concat(P,"/signup"),r);case 3:return a=e.sent,s=a.data,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message),e.abrupt("return",null);case 12:case"end":return e.stop()}var r}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();var J=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1];function r(){return(r=Object(u.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,n);case 2:if(a=e.sent,console.log(a),a){e.next=6;break}return e.abrupt("return");case 6:r={userName:t,token:a.token},localStorage.setItem("user",JSON.stringify(r)),s(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=Object(u.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,n);case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:alert("Created user ".concat(a.name));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));(null===e||void 0===e?void 0:e.token)&&s(!0)}),[]),Object(m.jsx)("main",{children:n?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{style:{backgroundColor:"whitesmoke",marginLeft:"10%"},onClick:function(){confirm("Want to logout?")&&(localStorage.clear(),s(!1))},children:"LOGOUT"}),Object(m.jsx)(f,{}),Object(m.jsx)(w,{})]}):Object(m.jsxs)("section",{className:F.a.section,children:[Object(m.jsx)(U,{action:function(e,t){return r.apply(this,arguments)},type:"login"}),Object(m.jsx)(U,{action:function(e,t){return c.apply(this,arguments)},type:"signup"})]})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(J,{})}),document.getElementById("root")),E()}},[[76,1,2]]]);
//# sourceMappingURL=main.7d7567b4.chunk.js.map