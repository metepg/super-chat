(this["webpackJsonpsuper-chat"]=this["webpackJsonpsuper-chat"]||[]).push([[0],{28:function(e,t,n){e.exports={inputChat:"MessageForm_inputChat__aQLW1",sendButton:"MessageForm_sendButton__1xv1A"}},39:function(e,t,n){e.exports={title:"Header_title__3SH2Q"}},40:function(e,t,n){e.exports={box:"MessageFeed_box__12tUp"}},44:function(e,t,n){e.exports={removeButton:"RemoveButton_removeButton__ELsQx"}},45:function(e,t,n){e.exports={form:"LoginSignup_form__2HOIW"}},46:function(e,t,n){e.exports={section:"App_section__1OL6S"}},7:function(e,t,n){e.exports={controller:"ChatBox_controller__2YqpX",superController:"ChatBox_superController__3OAP4",flexController:"ChatBox_flexController__N3g51",aside:"ChatBox_aside__1e6dg",feed:"ChatBox_feed__1yOeR",toppaneleft:"ChatBox_toppaneleft___mu8Y",toppaneright:"ChatBox_toppaneright__fMlVa",usersText:"ChatBox_usersText__3Bl2o",usersList:"ChatBox_usersList__3GDk4",loginButton:"ChatBox_loginButton__1WTfk",signUpButton:"ChatBox_signUpButton__2AL-A",inputsLoginPassword:"ChatBox_inputsLoginPassword__3dkVv",inputsUsernameSignUp:"ChatBox_inputsUsernameSignUp__2n0bI",chatMessages:"ChatBox_chatMessages__1fRtn",name:"ChatBox_name__1KxRA",teksti:"ChatBox_teksti__8c9Mn",messagesList:"ChatBox_messagesList__34Q80",liMessage:"ChatBox_liMessage__1DgYs",msgTime:"ChatBox_msgTime__2ZaYJ"}},77:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n.n(a),r=n(38),c=n.n(r),o=n(17),i=n.n(o),u=n(20),l=n(16),p=n(39),m=n.n(p),j=n(0),f=function(){return Object(j.jsx)("h1",{className:m.a.title,children:"SUPER CHAT"})},x=n(40),h=n.n(x),b=n(21),d=n.n(b),g=n(28),_=n.n(g),O=n(47),v=Object(O.a)();v.on("connect",(function(){console.log("connected")}));var C=v,B=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1];function r(e){if(e.preventDefault(),n){var t,a=JSON.parse(localStorage.getItem("user")).userName,r={message:n,userName:a};t=r,d.a.post("/api/message",t),C.emit("message",r),e.target.reset(),s("")}}return Object(j.jsxs)("form",{onSubmit:function(e){return r(e)},children:[Object(j.jsx)("input",{pattern:"^.{1,80}$",title:"Max 80 characters.",maxLength:"80",required:"required",className:_.a.inputChat,placeholder:"Type something",onChange:function(e){return s(e.target.value)}}),Object(j.jsx)("button",{className:_.a.sendButton,type:"submit",children:"SEND"})]})},N=function(){return Object(j.jsx)("div",{className:h.a.box,children:Object(j.jsx)(B,{})})},S=n(44),y=n.n(S),k=function(e){return JSON.parse(localStorage.getItem("user")).userName===e.item.userName?Object(j.jsx)("button",{type:"button",className:y.a.removeButton,onClick:function(){return C.emit("delete-message",e.item.id)},children:"Remove"}):null},w=n(7),L=n.n(w),T=n(29),M=function(e){return e.map((function(e){var t,n,a=new Date(e.messageTime).toLocaleString("en-GB").split(","),s=new Date(Date.now()).toLocaleString("en-GB").split(",");return a[0]===s[0]&&(n="Today at ".concat(a[1])),Object(T.a)(Object(T.a)({},e),{},{messageTime:null!==(t=n)&&void 0!==t?t:"".concat(a[0]," at ").concat(a[1])})}))},U=function(){var e=s.a.useState([]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=s.a.useState(),o=Object(l.a)(c,2),i=o[0],u=o[1];return Object(a.useEffect)((function(){C.on("message",(function(e){r(M(e))})),C.on("user-connection",(function(e){u(e.length)}))}),[]),Object(j.jsxs)("section",{className:L.a.controller,children:[Object(j.jsx)("section",{className:L.a.superController,children:Object(j.jsx)("ul",{children:n.map((function(e){return Object(j.jsxs)("li",{className:L.a.liMessage,children:[Object(j.jsxs)("p",{className:L.a.name,children:[e.userName," ",Object(j.jsx)("span",{className:L.a.msgTime,children:e.messageTime})]}),Object(j.jsxs)("div",{className:L.a.flexController,children:[Object(j.jsx)("p",{className:L.a.teksti,children:e.message}),Object(j.jsx)(k,{item:e})]})]},e.id)}))})}),Object(j.jsx)("div",{className:L.a.toppaneleft,children:Object(j.jsx)("div",{className:L.a.inputsUsernameSignUp})}),Object(j.jsx)("div",{className:L.a.toppaneright,children:Object(j.jsx)("h1",{className:L.a.usersText,children:"Users online"})}),Object(j.jsx)("aside",{className:L.a.aside,children:Object(j.jsx)("ul",{className:L.a.usersList,children:Object(j.jsx)("li",{children:i})})}),Object(j.jsx)("div",{className:L.a.feed,children:Object(j.jsx)(N,{})})]})},D=n(45),F=n.n(D),I=function(e){var t=e.setValue,n=e.placeholder,a=e.type,s=e.value;return Object(j.jsx)("input",{required:!0,placeholder:n,type:a,value:s,onChange:function(e){return t(e.target.value)}})},A=function(e){var t=e.action,n=e.type,s=Object(a.useState)(""),r=Object(l.a)(s,2),c=r[0],o=r[1],i=Object(a.useState)(""),u=Object(l.a)(i,2),p=u[0],m=u[1];return Object(j.jsxs)("form",{style:"signup"===n?{background:"linear-gradient(to top, #00bfff, #94a0ff)"}:null,onSubmit:function(e){return function(e){e.preventDefault(),c.trim()&&p.trim()&&(t(c,p),m(""))}(e)},className:F.a.form,children:[Object(j.jsx)(I,{setValue:o,placeholder:"name",type:"text",value:c}),Object(j.jsx)(I,{setValue:m,placeholder:"password",type:"password",value:p}),Object(j.jsx)("button",{style:"signup"===n?{background:"linear-gradient(to top, #00bfff, #94a0ff",color:"white"}:null,type:"submit",children:n})]})},J=n(46),E=n.n(J),P="/auth",R=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r={name:t,password:n},d.a.post("".concat(P,"/login"),r);case 3:return a=e.sent,s=a.data,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message),e.abrupt("return",null);case 12:case"end":return e.stop()}var r}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r={name:t,password:n},d.a.post("".concat(P,"/signup"),r);case 3:return a=e.sent,s=a.data,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message),e.abrupt("return",null);case 12:case"end":return e.stop()}var r}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();var q=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1];function r(){return(r=Object(u.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t,n);case 2:if(a=e.sent,console.log(a),a){e.next=6;break}return e.abrupt("return");case 6:r={userName:t,token:a.token},localStorage.setItem("user",JSON.stringify(r)),s(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=Object(u.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t,n);case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:alert("Created user ".concat(a.name));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));(null===e||void 0===e?void 0:e.token)&&s(!0)}),[]),Object(j.jsx)("main",{children:n?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{style:{backgroundColor:"whitesmoke",marginLeft:"10%"},onClick:function(){confirm("Want to logout?")&&(localStorage.clear(),s(!1))},children:"LOGOUT"}),Object(j.jsx)(f,{}),Object(j.jsx)(U,{})]}):Object(j.jsxs)("section",{className:E.a.section,children:[Object(j.jsx)(A,{action:function(e,t){return r.apply(this,arguments)},type:"login"}),Object(j.jsx)(A,{action:function(e,t){return c.apply(this,arguments)},type:"signup"})]})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(q,{})}),document.getElementById("root")),G()}},[[77,1,2]]]);
//# sourceMappingURL=main.0e1ffce9.chunk.js.map