{"version":3,"sources":["components/ChatBox/ChatBox.module.css","components/MessageForm/MessageForm.module.css","components/Header/Header.module.css","components/MessageFeed/MessageFeed.module.css","components/RemoveButton/RemoveButton.module.css","components/LoginSignup/LoginSignup.module.css","App.module.css","components/Header/Header.js","api/message.js","soketti.js","components/MessageForm/MessageForm.js","components/MessageFeed/MessageFeed.js","components/RemoveButton/RemoveButton.js","api/mapMessageTime.js","components/ChatBox/Chatbox.js","components/LoginSignup/LoginSignup.js","api/auth.js","components/utils/authentication.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","Header","className","css","title","createMessage","data","axios","post","socket","io","on","console","log","MessageForm","useState","message","setMessage","onSubmit","e","preventDefault","userName","JSON","parse","localStorage","getItem","msgData","emit","target","reset","validate","container","style","color","pattern","maxLength","required","placeholder","onChange","cleanOnEnter","onEnter","value","borderColor","sendButton","type","MessageFeed","box","RemoveButton","item","removeButton","onClick","id","mapMessageTime","messages","map","msgTime","time","Date","messageTime","toLocaleString","split","today","now","ChatBox","React","list","setList","usercount","setUsercount","users","setUsers","useEffect","a","userCount","length","controller","superController","liMessage","name","flexController","teksti","toppaneleft","inputsUsernameSignUp","toppaneright","usersText","aside","usersList","user","feed","Input","setValue","LoginSignup","action","setName","password","setPassword","background","trim","validateForm","form","URL","validateLogin","userData","alert","response","validateSignup","App","resetTimer","setItem","logout","confirm","err","clear","setIsAuthenticated","window","location","reload","setInterval","parseInt","addEventListener","isAuthenticated","refreshPage","obg","token","stringify","onMouseMove","backgroundColor","marginLeft","section","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d7892c86.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"controller\":\"ChatBox_controller__2YqpX\",\"superController\":\"ChatBox_superController__3OAP4\",\"flexController\":\"ChatBox_flexController__N3g51\",\"aside\":\"ChatBox_aside__1e6dg\",\"feed\":\"ChatBox_feed__1yOeR\",\"toppaneleft\":\"ChatBox_toppaneleft___mu8Y\",\"toppaneright\":\"ChatBox_toppaneright__fMlVa\",\"usersText\":\"ChatBox_usersText__3Bl2o\",\"usersList\":\"ChatBox_usersList__3GDk4\",\"loginButton\":\"ChatBox_loginButton__1WTfk\",\"signUpButton\":\"ChatBox_signUpButton__2AL-A\",\"inputsLoginPassword\":\"ChatBox_inputsLoginPassword__3dkVv\",\"inputsUsernameSignUp\":\"ChatBox_inputsUsernameSignUp__2n0bI\",\"chatMessages\":\"ChatBox_chatMessages__1fRtn\",\"name\":\"ChatBox_name__1KxRA\",\"teksti\":\"ChatBox_teksti__8c9Mn\",\"messagesList\":\"ChatBox_messagesList__34Q80\",\"liMessage\":\"ChatBox_liMessage__1DgYs\",\"msgTime\":\"ChatBox_msgTime__2ZaYJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputChat\":\"MessageForm_inputChat__aQLW1\",\"sendButton\":\"MessageForm_sendButton__1xv1A\",\"container\":\"MessageForm_container__1QJi3\",\"inputEmoji\":\"MessageForm_inputEmoji__2gzHZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Header_title__3SH2Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"MessageFeed_box__12tUp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"removeButton\":\"RemoveButton_removeButton__ELsQx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"LoginSignup_form__2HOIW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"App_section__1OL6S\"};","import css from './Header.module.css';\nconst Header = () => {\n  return <h1 className={css.title}>SUPER CHAT</h1>;\n};\n\nexport default Header;\n","import axios from 'axios';\n\nconst URL = '/api/message';\n\nexport const createMessage = (data) => axios.post(URL, data);\n","import io from 'socket.io-client';\n\n// const socket = io('http://localhost:3001');\nconst socket = io();\n\nsocket.on('connect', () => {\n  console.log('connected');\n});\n\nexport default socket;\n","import React, { useState } from 'react';\nimport { createMessage } from '../../api/message';\nimport css from './MessageForm.module.css';\nimport './style.css';\nimport socket from '../../soketti';\nimport InputEmoji from 'react-input-emoji';\n\nconst MessageForm = () => {\n  // message = inputin sen hetkinen arvo\n  // setMessage = asettaa inputille arvon kun kenttään kirjoitetaan\n  const [message, setMessage] = useState('');\n\n  function validate(e) {\n    // e.preventDefault estää sivun päivittymisen (default toiminto 90 luvulta kun lomakkeilla lähetettiin dataa)\n    e.preventDefault();\n\n    // Jos viestikenttä on tyhjä älä tee mitään\n    if (!message) {\n      return;\n    }\n    const { userName } = JSON.parse(localStorage.getItem('user'));\n    const msgData = { message, userName };\n    createMessage(msgData);\n    socket.emit('message', msgData);\n    e.target.reset();\n    setMessage('');\n  }\n\n  function onEnterDown() {\n    // Jos viestikenttä on tyhjä älä tee mitään\n    if (!message) {\n      return;\n    }\n    const { userName } = JSON.parse(localStorage.getItem('user'));\n    const msgData = { message, userName };\n    createMessage(msgData);\n    socket.emit('message', msgData);\n    setMessage('');\n  }\n\n  return (\n    <form onSubmit={(e) => validate(e)}>\n      <div className={css.container}>\n        <InputEmoji\n          style={{ color: 'red' }}\n          className=\"inputEmoji\"\n          pattern=\"^.{1,80}$\"\n          title=\"Max 80 characters.\"\n          maxLength=\"80\"\n          required=\"required\"\n          placeholder=\"Type a message\"\n          onChange={setMessage}\n          cleanOnEnter\n          onEnter={onEnterDown}\n          value={message}\n          borderColor={'#FFFFFF'}\n        />\n        <button className={css.sendButton} type=\"submit\">\n          SEND\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default MessageForm;\n","import css from './MessageFeed.module.css';\nimport React from 'react';\nimport MessageForm from '../MessageForm/MessageForm';\n\nconst MessageFeed = () => {\n  return (\n    <div className={css.box}>\n      <MessageForm />\n    </div>\n  );\n};\n\nexport default MessageFeed;\n","import socket from '../../soketti';\nimport css from './RemoveButton.module.css';\n\nconst RemoveButton = (item) => {\n  const user = JSON.parse(localStorage.getItem('user'));\n  if (user.userName === item.item.userName) {\n    return (\n      <button\n        type=\"button\"\n        className={css.removeButton}\n        onClick={() => socket.emit('delete-message', item.item.id)}\n      >\n        Remove\n      </button>\n    );\n  }\n  return null;\n};\nexport default RemoveButton;\n","const mapMessageTime = (messages) =>\n  messages.map((message) => {\n    const time = new Date(message.messageTime)\n      .toLocaleString('en-GB')\n      .split(',');\n    const today = new Date(Date.now()).toLocaleString('en-GB').split(',');\n    let msgTime;\n    if (time[0] === today[0]) msgTime = `Today at ${time[1]}`;\n    return {\n      ...message,\n      messageTime: msgTime ?? `${time[0]} at ${time[1]}`,\n    };\n  });\nexport default mapMessageTime;\n","import MessageFeed from '../MessageFeed/MessageFeed';\nimport RemoveButton from '../RemoveButton/RemoveButton';\nimport css from './ChatBox.module.css';\nimport React, { useEffect } from 'react';\nimport socket from '../../soketti';\nimport mapMessageTime from '../../api/mapMessageTime';\nimport Linkify from 'linkify-react';\nconst ChatBox = () => {\n  const [list, setList] = React.useState([]);\n  const [usercount, setUsercount] = React.useState();\n  const [users, setUsers] = React.useState([]);\n  useEffect(() => {\n    socket.on('message', async function (messages) {\n      setList(mapMessageTime(messages));\n    });\n    socket.on('usersList', async function (userCount) {\n      //console.log(userCount);\n      setUsers(userCount);\n      setUsercount(userCount.length);\n    });\n  }, []);\n  return (\n    <section className={css.controller}>\n      <section className={css.superController}>\n        <ul>\n          {list.map((item) => (\n            <li className={css.liMessage} key={item.id}>\n              <p className={css.name}>\n                {item.userName}{' '}\n                <span className={css.msgTime}>{item.messageTime}</span>\n              </p>\n              <div className={css.flexController}>\n                <Linkify>\n                  <p className={css.teksti}>{item.message}</p>\n                </Linkify>\n                <RemoveButton item={item} />\n              </div>\n            </li>\n          ))}\n        </ul>\n      </section>\n      <div className={css.toppaneleft}>\n        <div className={css.inputsUsernameSignUp}></div>\n      </div>\n      <div className={css.toppaneright}>\n        <h1 className={css.usersText}>Users online</h1>\n        <h3 className={css.usersText}>{usercount}</h3>\n      </div>\n      <aside className={css.aside}>\n        <ul className={css.usersList}>\n          {users.map((user) => (\n            <li key={user.id}>{user.userName}</li>\n          ))}\n        </ul>\n      </aside>\n      <div className={css.feed}>\n        <MessageFeed />\n      </div>\n    </section>\n  );\n};\nexport default ChatBox;\n","import { useState } from 'react';\nimport css from './LoginSignup.module.css';\nconst Input = ({ setValue, placeholder, type, value }) => {\n  return (\n    <input\n      required\n      placeholder={placeholder}\n      type={type}\n      value={value}\n      onChange={(e) => setValue(e.target.value)}\n    />\n  );\n};\nconst LoginSignup = ({ action, type }) => {\n  const [name, setName] = useState('');\n  const [password, setPassword] = useState('');\n\n  function validateForm(e) {\n    e.preventDefault();\n    if (!(name.trim() && password.trim())) return;\n    action(name, password);\n    setPassword('');\n  }\n  return (\n    <form\n      style={\n        type === 'signup'\n          ? { background: 'linear-gradient(to top, #00bfff, #94a0ff)' }\n          : null\n      }\n      onSubmit={(e) => validateForm(e, name, password)}\n      className={css.form}\n    >\n      <Input\n        setValue={setName}\n        placeholder={'name'}\n        type={'text'}\n        value={name}\n      />\n\n      <Input\n        setValue={setPassword}\n        placeholder={'password'}\n        type={'password'}\n        value={password}\n      />\n      <button\n        style={\n          type === 'signup'\n            ? {\n                background: 'linear-gradient(to top, #00bfff, #94a0ff',\n                color: 'white',\n              }\n            : null\n        }\n        type=\"submit\"\n      >\n        {type}\n      </button>\n    </form>\n  );\n};\nexport default LoginSignup;\n","import axios from 'axios';\n\nconst URL = '/auth';\n\nexport const signup = (userData) => axios.post(`${URL}/signup`, userData);\nexport const login = (userData) => axios.post(`${URL}/login`, userData);\n","import { login, signup } from '../../api/auth';\n\nexport const validateLogin = async (name, password) => {\n  try {\n    const { data } = await login({ name, password });\n    return data;\n  } catch (error) {\n    alert(error.response.data.message);\n    return null;\n  }\n};\n\nexport const validateSignup = async (name, password) => {\n  try {\n    const { data } = await signup({ name, password });\n    return data;\n  } catch (error) {\n    alert(error.response.data.message);\n    return null;\n  }\n};\n","/* eslint-disable no-restricted-globals */\nimport Header from './components/Header/Header';\nimport ChatBox from './components/ChatBox/Chatbox';\nimport LoginSignup from './components/LoginSignup/LoginSignup';\nimport css from './App.module.css';\nimport { useEffect, useState } from 'react';\nimport {\n  validateLogin,\n  validateSignup,\n} from './components/utils/authentication';\nimport socket from './soketti';\nfunction App() {\n  function resetTimer() {\n    localStorage.setItem('expireTime', Date.now() + 100000);\n  }\n\n  setInterval(() => {\n    timedLogout();\n  }, 100000);\n\n  setInterval(() => {\n    if (localStorage.getItem('user')) {\n      try {\n        const { userName } = JSON.parse(localStorage.getItem('user'));\n        socket.emit('online', userName);\n      } catch (err) {\n        alert(err);\n      }\n    }\n  }, 10000);\n\n  const handleMouseMove = () => {\n    resetTimer();\n  };\n\n  function timedLogout() {\n    if (localStorage.getItem('user')) {\n      if (parseInt(localStorage.getItem('expireTime')) <= Date.now()) {\n        alert('logout');\n        logout();\n      }\n    }\n  }\n\n  function logout() {\n    const logout = confirm('Want to logout?');\n    if (!logout) {\n      return;\n    }\n    try {\n      const { userName } = JSON.parse(localStorage.getItem('user'));\n      socket.emit('user-disconnect', userName);\n    } catch (err) {\n      alert(err);\n    }\n    localStorage.clear();\n    setIsAuthenticated(false);\n    window.location.reload();\n  }\n\n  window.addEventListener('mousemove', resetTimer());\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  // Katsoo aina sivun latautuessa löytyykö token jo localstoragesta\n  // TODO:\n  // Tokenin voimassaolon tarkistaminen\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem('user'));\n    if (user?.token) {\n      setIsAuthenticated(true);\n    }\n  }, []);\n\n  async function loginUser(name, password) {\n    const userData = await validateLogin(name, password);\n    if (!userData) return;\n    await refreshPage(name, userData);\n  }\n\n  async function signupUser(name, password) {\n    const userData = await validateSignup(name, password);\n    if (!userData) return;\n    alert(`Created user ${userData.name}`);\n    await refreshPage(name, userData);\n  }\n\n  async function refreshPage(name, userData) {\n    console.log(name);\n    const obg = { userName: name, token: userData.token };\n    localStorage.setItem('user', JSON.stringify(obg));\n    socket.emit('user-connection', name);\n    resetTimer();\n    setIsAuthenticated(true);\n    window.location.reload();\n  }\n\n  return (\n    <main onMouseMove={handleMouseMove}>\n      {isAuthenticated ? (\n        <>\n          <button\n            style={{\n              backgroundColor: 'whitesmoke',\n              marginLeft: '10%',\n            }}\n            onClick={logout}\n          >\n            LOGOUT\n          </button>\n          <Header />\n          <ChatBox />\n        </>\n      ) : (\n        <section className={css.section}>\n          <LoginSignup action={loginUser} type={'login'} />\n          <LoginSignup action={signupUser} type={'signup'} />\n        </section>\n      )}\n    </main>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}