(this["webpackJsonpsuper-chat"]=this["webpackJsonpsuper-chat"]||[]).push([[0],{10:function(e,t,n){e.exports={controller:"ChatBox_controller__2YqpX",superController:"ChatBox_superController__3OAP4",flexController:"ChatBox_flexController__N3g51",aside:"ChatBox_aside__1e6dg",feed:"ChatBox_feed__1yOeR",toppaneleft:"ChatBox_toppaneleft___mu8Y",toppaneright:"ChatBox_toppaneright__fMlVa",usersText:"ChatBox_usersText__3Bl2o",usersList:"ChatBox_usersList__3GDk4",loginButton:"ChatBox_loginButton__1WTfk",signUpButton:"ChatBox_signUpButton__2AL-A",inputsLoginPassword:"ChatBox_inputsLoginPassword__3dkVv",inputsUsernameSignUp:"ChatBox_inputsUsernameSignUp__2n0bI",chatMessages:"ChatBox_chatMessages__1fRtn",name:"ChatBox_name__1KxRA",teksti:"ChatBox_teksti__8c9Mn",messagesList:"ChatBox_messagesList__34Q80",liMessage:"ChatBox_liMessage__1DgYs",msgTime:"ChatBox_msgTime__2ZaYJ"}},30:function(e,t,n){e.exports={inputChat:"MessageForm_inputChat__aQLW1",sendButton:"MessageForm_sendButton__1xv1A",container:"MessageForm_container__1QJi3",inputEmoji:"MessageForm_inputEmoji__2gzHZ"}},41:function(e,t,n){e.exports={title:"Header_title__3SH2Q"}},42:function(e,t,n){e.exports={box:"MessageFeed_box__12tUp"}},46:function(e,t,n){e.exports={removeButton:"RemoveButton_removeButton__ELsQx"}},47:function(e,t,n){e.exports={form:"LoginSignup_form__2HOIW"}},48:function(e,t,n){e.exports={section:"App_section__1OL6S"}},58:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(40),c=n.n(s),o=n(3),i=n.n(o),u=n(12),l=n(6),p=n(41),m=n.n(p),f=n(2),j=function(){return Object(f.jsx)("h1",{className:m.a.title,children:"SUPER CHAT"})},d=n(42),x=n.n(d),h=n(30),g=n.n(h),b=(n(58),n(49)),_=Object(b.a)();_.on("connect",(function(){console.log("connected")}));var O=_,v=n(50),N=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(f.jsx)("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),n){var t=JSON.parse(localStorage.getItem("user")).userName,a={message:n,userName:t};O.emit("message",a),e.target.reset(),r("")}}(e)},children:Object(f.jsxs)("div",{className:g.a.container,children:[Object(f.jsx)(v.a,{style:{color:"red"},className:"inputEmoji",pattern:"^.{1,80}$",title:"Max 80 characters.",maxLength:"80",required:"required",placeholder:"Type a message",onChange:r,cleanOnEnter:!0,onEnter:function(){if(n){var e=JSON.parse(localStorage.getItem("user")).userName,t={message:n,userName:e};O.emit("message",t),r("")}},value:n,borderColor:"#FFFFFF"}),Object(f.jsx)("button",{className:g.a.sendButton,type:"submit",children:"SEND"})]})})},S=function(){return Object(f.jsx)("div",{className:x.a.box,children:Object(f.jsx)(N,{})})},C=n(46),w=n.n(C),B=function(e){return JSON.parse(localStorage.getItem("user")).userName===e.item.userName?Object(f.jsx)("button",{type:"button",className:w.a.removeButton,onClick:function(){return O.emit("delete-message",e.item.id)},children:"Remove"}):null},y=n(10),k=n.n(y),L=n(23),I=function(e){return e.map((function(e){var t,n,a=new Date(e.messageTime).toLocaleString("en-GB").split(","),r=new Date(Date.now()).toLocaleString("en-GB").split(",");return a[0]===r[0]&&(n="Today at ".concat(a[1])),Object(L.a)(Object(L.a)({},e),{},{messageTime:null!==(t=n)&&void 0!==t?t:"".concat(a[0]," at ").concat(a[1])})}))},T=n(51),F=function(){var e=r.a.useState([]),t=Object(l.a)(e,2),n=t[0],s=t[1],c=r.a.useState(),o=Object(l.a)(c,2),p=o[0],m=o[1],j=r.a.useState([]),d=Object(l.a)(j,2),x=d[0],h=d[1];return Object(a.useEffect)((function(){O.on("message",function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(I(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O.on("usersList",function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=JSON.parse(localStorage.getItem("user")),a=n.userName,t.find((function(e){return a}))||O.emit("online",a),h(t),m(t.length)}catch(r){}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(f.jsxs)("section",{className:k.a.controller,children:[Object(f.jsx)("section",{className:k.a.superController,children:Object(f.jsx)("ul",{children:n.map((function(e){return Object(f.jsxs)("li",{className:k.a.liMessage,children:[Object(f.jsxs)("p",{className:k.a.name,children:[e.userName," ",Object(f.jsx)("span",{className:k.a.msgTime,children:e.messageTime})]}),Object(f.jsxs)("div",{className:k.a.flexController,children:[Object(f.jsx)(T.a,{children:Object(f.jsx)("p",{className:k.a.teksti,children:e.message})}),Object(f.jsx)(B,{item:e})]})]},e.id)}))})}),Object(f.jsx)("div",{className:k.a.toppaneleft,children:Object(f.jsx)("div",{className:k.a.inputsUsernameSignUp})}),Object(f.jsxs)("div",{className:k.a.toppaneright,children:[Object(f.jsx)("h1",{className:k.a.usersText,children:"Users online"}),Object(f.jsx)("h3",{className:k.a.usersText,children:p})]}),Object(f.jsx)("aside",{className:k.a.aside,children:Object(f.jsx)("ul",{className:k.a.usersList,children:x.map((function(e){return Object(f.jsx)("li",{children:e.userName},e.id)}))})}),Object(f.jsx)("div",{className:k.a.feed,children:Object(f.jsx)(S,{})})]})},M=n(47),E=n.n(M),J=function(e){var t=e.setValue,n=e.placeholder,a=e.type,r=e.value;return Object(f.jsx)("input",{required:!0,placeholder:n,type:a,value:r,onChange:function(e){return t(e.target.value)}})},U=function(e){var t=e.action,n=e.type,r=Object(a.useState)(""),s=Object(l.a)(r,2),c=s[0],o=s[1],i=Object(a.useState)(""),u=Object(l.a)(i,2),p=u[0],m=u[1];return Object(f.jsxs)("form",{style:"signup"===n?{background:"linear-gradient(to top, #00bfff, #94a0ff)"}:null,onSubmit:function(e){return function(e){e.preventDefault(),c.trim()&&p.trim()&&(t(c,p),m(""))}(e)},className:E.a.form,children:[Object(f.jsx)(J,{setValue:o,placeholder:"name",type:"text",value:c}),Object(f.jsx)(J,{setValue:m,placeholder:"password",type:"password",value:p}),Object(f.jsx)("button",{style:"signup"===n?{background:"linear-gradient(to top, #00bfff, #94a0ff",color:"white"}:null,type:"submit",children:n})]})},D=n(48),A=n.n(D),P=n(31),R=n.n(P),H="/auth",Q=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s={name:t,password:n},R.a.post("".concat(H,"/login"),s);case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message),e.abrupt("return",null);case 12:case"end":return e.stop()}var s}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s={name:t,password:n},R.a.post("".concat(H,"/signup"),s);case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message),e.abrupt("return",null);case 12:case"end":return e.stop()}var s}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();var q=function(){function e(){localStorage.setItem("expireTime",Date.now()+1e5)}function t(){try{var e=JSON.parse(localStorage.getItem("user")).userName;O.emit("user-disconnect",e)}catch(t){alert(t)}localStorage.clear(),c(!1),window.location.reload()}setInterval((function(){localStorage.getItem("user")&&parseInt(localStorage.getItem("expireTime"))<=Date.now()&&(alert("logout"),t())}),1e5),setInterval((function(){if(localStorage.getItem("user"))try{var e=JSON.parse(localStorage.getItem("user")).userName;O.emit("online",e)}catch(t){alert(t)}}),1e4),window.addEventListener("mousemove",e());var n=Object(a.useState)(!1),r=Object(l.a)(n,2),s=r[0],c=r[1];function o(){return(o=Object(u.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,n);case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,m(t,a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(u.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t,n);case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:return alert("Created user ".concat(a.name)),e.next=8,m(t,a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return d.apply(this,arguments)}function d(){return(d=Object(u.a)(i.a.mark((function t(n,a){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={userName:n,token:a.token},localStorage.setItem("user",JSON.stringify(r)),O.emit("user-connection",n),e(),c(!0),window.location.reload();case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));(null===e||void 0===e?void 0:e.token)&&c(!0)}),[]),Object(f.jsx)("main",{onMouseMove:function(){e()},children:s?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{style:{backgroundColor:"whitesmoke",marginLeft:"10%"},onClick:t,children:"LOGOUT"}),Object(f.jsx)(j,{}),Object(f.jsx)(F,{})]}):Object(f.jsxs)("section",{className:A.a.section,children:[Object(f.jsx)(U,{action:function(e,t){return o.apply(this,arguments)},type:"login"}),Object(f.jsx)(U,{action:function(e,t){return p.apply(this,arguments)},type:"signup"})]})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(q,{})}),document.getElementById("root")),G()}},[[84,1,2]]]);
//# sourceMappingURL=main.572890dc.chunk.js.map